<!DOCTYPE html>
<html lang="ru" id="htmlTheme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        const darkTheme = `<%= darkTheme %>`;
        if (darkTheme === 'on') {
            document.documentElement.classList.add('darkTheme');
        } else {
            document.documentElement.classList.remove('darkTheme');
        }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/stylesheets/header.css">
    <link rel="stylesheet" href="/stylesheets/theme.css">
    <link rel="stylesheet" href="/stylesheets/alert.css">
    <noscript>
        <style>
            body{
                overflow: hidden;
            }
        </style>
        <div class="header-barrier"></div>
        <div class="header-border">
            <h1>JavaScript отключён!</h1>
            <p>Для корректной работы сайта включите JavaScript в настройках вашего браузера. Вот как это сделать:</p>
            <ul style="text-align: left; display: inline-block;">
                <li><strong>Google Chrome:</strong> Откройте настройки → Конфиденциальность и безопасность → Настройки сайта → JavaScript → Включите.</li>
                <li><strong>Mozilla Firefox:</strong> Введите <code>about:config</code> в адресной строке → Найдите <code>javascript.enabled</code> → Установите в <code>true</code>.</li>
                <li><strong>Safari:</strong> Откройте настройки → Безопасность → Включите опцию JavaScript.</li>
                <li><strong>Microsoft Edge:</strong> Перейдите в параметры → Файлы cookie и разрешения сайта → JavaScript → Включите.</li>
            </ul>
            <div style="text-align: center">
                <p><a href="/">Обновите страницу</a> после того, как включите JavaScript.</p>
                <p>Если после всех действий не удалось решить проблему, обратитеть в поддержку:</p>
                <div class="header-contacts">
                    <a class="header-contact" href="mailto:hffreelancers@gmail.com">Эл. адрес</a>
                    <a class="header-contact" href="https://web.telegram.org/a/">Телеграм</a>
                </div>
            </div>
        </div>
    </noscript>
</head>
<script>
    const pushNotifications = `<%= notifications %>`;
    const localeType = '<%= locale %>';
    const sendId = '<%= user.id %>';
</script>
<body>
<header class="header">
    <a href="/" class="container-logo">
        <img src="/images/icon.png">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" id="Layer_1" x="0px" y="0px" viewBox="0 0 440 150" enable-background="new 0 0 440 150" xml:space="preserve">
            <g>
                <path d="M226.8,52.5c-18.7,0.3-34.8,16.1-36,35.1c-1.1,19.1,14.1,36.1,33.9,38.1c19.9,2,36-13.8,36-35.1   C260.7,69.2,245.5,52.2,226.8,52.5z M240.2,92c-0.8,9.9-7,15.3-11.1,15.7c-10.3,1.2-19.1-8.1-18.5-20s5.4-19.3,15.1-19.5   C235.4,68,241.3,79.1,240.2,92z"/>
                <path d="M300.3,54.4c-18.7-0.3-33.9,16.7-33.9,38.1s16.1,37.1,36,35.1c19.9-2,35.1-19,33.9-38.1   C335.2,70.5,319.1,54.8,300.3,54.4z M298,109.7c-4.1-0.5-10.2-5.9-11.1-15.7c-1.1-12.9,4.8-24,14.5-23.8s14.5,7.6,15.1,19.5   C317.1,101.5,308.3,110.9,298,109.7z"/>
                <polygon points="82.5,36.6 62.4,28.9 23.2,66.3 23.2,19.6 0,25.5 0,135.2 23.2,136 23,97.6 37.3,83.8 52.4,136    72.9,136 54,67.9  "/>
                <path d="M146.2,49.2L145.8,0L126,5.2l3.2,121.6l19.5,0.7l-1.1-62.8c4.3-1.9,18.4-5.8,18.9,9.7l1.9,22.1l1.3,31.1   h20.4l-7.7-53.7C179.3,42.5,167.8,42.4,146.2,49.2z"/>
                <polygon points="415.2,128.2 409.5,141.6 421.7,150 433.7,142.9 428.6,128.2  "/>
                <path d="M363.4,19.6l-15.5-6.4v32.1l-17.3-0.6l3.3,22.8h14l1,54.3c0,0-2.2,19.5,27.6,15.1c0,0,9.3-2.8,9-9.3v-21.4   c0,0-6.3,3.7-13.1,3.7c-6.8,0-6.9-3.3-6.9-3.3l-1.8-42l21.7-1.2V49.5L363.1,48L363.4,19.6z"/>
                <polygon points="440,19.8 399,12 424.2,120.5  "/>
                <path d="M77.6,49.9L83,64.1c13.5-8.1,21.1,0,21.1,0l-0.1,9.1c-40.2,7.1-30,44.3-30,44.3   c4.1,14.6,17.3,14.1,17.3,14.1h30.1l0.6-67.7C117.3,32.4,77.6,49.9,77.6,49.9z M104,118.6c0,0-14.6,3.5-16.2-10.7   c0,0,0.3-22,16.7-19.6L104,118.6z"/>
            </g>
        </svg>
    </a>

    <div class="header-container">

        <div id="news">
            <div class="dropdown">
                <p class="ha dropdown-title">Новости<span>❯</span></p>
                <div class="dropdown-content" style="width: 140px;">
                    <a href="/news?tag=Updates">Обновление</a>
                    <a href="/news?tag=AboutGame">Об игре</a>
                    <a href="/news?tag=BugsErrors">Баги/Ошибки</a>
                    <a href="/news">Все новости</a>
                </div>
            </div>
        </div>

        <div id="rules">
            <div class="dropdown">
                <p class="ha dropdown-title">Правила<span class="dropdown-icon">❯</span></p>
                <div class="dropdown-content">
                    <a href="/privacyPolicy">Правила конфиденциальности</a>
                    <a href="/rules">Условия использования</a>
                </div>
            </div>
        </div>

        <div id="aboutUs">
            <div class="dropdown">
                <p class="ha dropdown-title">О нас<span>❯</span></p>
                <div class="dropdown-content" style="width: 120px;">
                    <a href="/aboutUs">О компании</a>
                    <a href="/contacts">Контакты</a>
                </div>
            </div>
        </div>

    </div>

    <div class="account-container">

        <% if (user && user.name) { %>
            <div class="dropdown">
                <p class="ha dropdown-title"><%= user.name.length > 4 ? user.name.slice(0, 4) + '...' : user.name %><span>❯</span></p>
                <div class="dropdown-content">
                    <% if (user.role === 'Admin') {%>
                        <a href="/admin/admin-panel">Админка</a>
                    <% } %>
                        <a onclick="logout();">Выйти</a>
                </div>
            </div>
        <% } else {%>
            <p onclick="window.location.href = '/auth/login'" class="ha">Войти</p>
        <% } %>
        <br>
        <div class="dropdown">
            <p class="ha dropdown-title">Русский<span>❯</span></p>
            <div class="dropdown-content" style="width: 80px;">
                <a onclick="changeLocaleEn();">English</a>
            </div>
        </div>

        <div class="media-width" onclick="mediaMenu()">
            <span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-justify-icon lucide-align-justify"><path d="M3 12h18"/><path d="M3 18h18"/><path d="M3 6h18"/></svg>
            </span>
        </div>

    </div>

</header>

<div class="brutalist-card" id="authBorder" hidden>
    <div class="brutalist-card__header">
        <div class="brutalist-card__icon">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
                ></path>
            </svg>
        </div>
        <div class="brutalist-card__alert">Вы не авторизованы!</div>
    </div>
    <div class="brutalist-card__message">
        <span>Войдите в учётную запись или создайте аккаунт.</span>
        <br>
        <br>
        <span>Регистрируясь или авторизируясь, вы принимаете наши <a class="termsOfUse" href="/rules" target="_blank">Условия использования</a> и <a href="/privacyPolicy" target="_blank" class="privacyPolicy">Политику конфиденциальности</a>.</span>
    </div>
    <div class="brutalist-card__actions">
        <button onclick="window.location.href = '/auth/login'" class="auth-btn">Войти</button>
        <button onclick="window.location.href = '/auth/register'" class="auth-btn">Создать аккаунт</button>
    </div>
    <button class="close-btn" id="closeAuthBorder">X</button>
</div>

<div class="media-body" id="mediaBorder">
    <div class="media-border">
        <div class="media-header">
            <a href="/">Kahoot</a>
            <button id="closeMediaBorder">X</button>
        </div>

        <div class="media-scroller">
            <div class="media-dropdowns">
                <div>
                    <div class="dropdown">
                        <p class="ha dropdown-title">Новости<span>❯</span></p>
                        <div class="dropdown-content media-dropdown-content" style="width: 140px;">
                            <a href="/news?tag=Updates">Обновление</a>
                            <a href="/news?tag=AboutGame">Об игре</a>
                            <a href="/news?tag=BugsErrors">Баги/Ошибки</a>
                            <a href="/news">Все новости</a>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="dropdown">
                        <p class="ha dropdown-title">Правила<span class="dropdown-icon">❯</span></p>
                        <div class="dropdown-content media-dropdown-content">
                            <a href="/privacyPolicy">Правила конфиденциальности</a>
                            <a href="/rules">Условия использования</a>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="dropdown">
                        <p class="ha dropdown-title">О нас<span>❯</span></p>
                        <div class="dropdown-content media-dropdown-content" style="width: 120px;">
                            <a href="/aboutUs">О компании</a>
                            <a href="/contacts">Контакты</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="phone-container">
                <% if (user && user.id) { %>
                    <div style="display: block">
                        <a onclick="redirectPage('/create-game')">📜 Создать игру</a>
                        <a onclick="findGame()">🔎 Найти игру</a>
                        <a onclick="redirectPage('/my-games')">🎮 Мои игры</a>
                    </div>
                    <div style="display: block">
                        <a onclick="redirectPage('/channels/@me')">👥 Друзья</a>
                        <a onclick="redirectPage('/settings')">⚙ Настройки</a>
                        <a class="support-btn" href="/support">📩 Поддержка</a>
                    </div>
                <% } else { %>
                    <div style="display: block">
                        <a onclick="authMenu()">📜 Начать игру</a>
                        <a class="support-btn" href="/support">📩 Поддержка</a>
                    </div>
                <% } %>
            </div>
        </div>

    </div>

</div>

<div class="toast-container" id="toast-container"></div>
<div class="new-barrier" id="barrier" hidden></div>
<%- include('back.ejs') %>
<script src="/socket.io/socket.io.js"></script>
<script src="/javascripts/header.js"></script>
<script src="/javascripts/locale.js"></script>
<script src="/javascripts/friends.js"></script>
<script src="/javascripts/token.js"></script>
<script src="/javascripts/alert.js"></script>
<script src="/javascripts/warnings.js"></script>
<script src="/javascripts/pageIdentificator.js"></script>
</body>
</html>