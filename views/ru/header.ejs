<!DOCTYPE html>
<html lang="ru" id="htmlTheme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        const darkTheme = `<%= darkTheme %>`;
        if (darkTheme === 'on') {
            document.documentElement.classList.add('darkTheme');
        } else {
            document.documentElement.classList.remove('darkTheme');
        }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/stylesheets/header.css">
    <link rel="stylesheet" href="/stylesheets/theme.css">
    <link rel="stylesheet" href="/stylesheets/alert.css">
    <noscript>
        <%- include('./tools/noscript.ejs') %>
    </noscript>
</head>
<script>
    const pushNotifications = `<%= notifications %>`;
    const localeType = '<%= locale %>';
    const sendId = '<%= user.id %>';
</script>
<body>
<header class="header">
    <a href="/" class="container-logo">
        <img src="/images/icon.png">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" id="Layer_1" x="0px" y="0px" viewBox="0 0 440 150" enable-background="new 0 0 440 150" xml:space="preserve">
            <g>
                <path d="M226.8,52.5c-18.7,0.3-34.8,16.1-36,35.1c-1.1,19.1,14.1,36.1,33.9,38.1c19.9,2,36-13.8,36-35.1   C260.7,69.2,245.5,52.2,226.8,52.5z M240.2,92c-0.8,9.9-7,15.3-11.1,15.7c-10.3,1.2-19.1-8.1-18.5-20s5.4-19.3,15.1-19.5   C235.4,68,241.3,79.1,240.2,92z"/>
                <path d="M300.3,54.4c-18.7-0.3-33.9,16.7-33.9,38.1s16.1,37.1,36,35.1c19.9-2,35.1-19,33.9-38.1   C335.2,70.5,319.1,54.8,300.3,54.4z M298,109.7c-4.1-0.5-10.2-5.9-11.1-15.7c-1.1-12.9,4.8-24,14.5-23.8s14.5,7.6,15.1,19.5   C317.1,101.5,308.3,110.9,298,109.7z"/>
                <polygon points="82.5,36.6 62.4,28.9 23.2,66.3 23.2,19.6 0,25.5 0,135.2 23.2,136 23,97.6 37.3,83.8 52.4,136    72.9,136 54,67.9  "/>
                <path d="M146.2,49.2L145.8,0L126,5.2l3.2,121.6l19.5,0.7l-1.1-62.8c4.3-1.9,18.4-5.8,18.9,9.7l1.9,22.1l1.3,31.1   h20.4l-7.7-53.7C179.3,42.5,167.8,42.4,146.2,49.2z"/>
                <polygon points="415.2,128.2 409.5,141.6 421.7,150 433.7,142.9 428.6,128.2  "/>
                <path d="M363.4,19.6l-15.5-6.4v32.1l-17.3-0.6l3.3,22.8h14l1,54.3c0,0-2.2,19.5,27.6,15.1c0,0,9.3-2.8,9-9.3v-21.4   c0,0-6.3,3.7-13.1,3.7c-6.8,0-6.9-3.3-6.9-3.3l-1.8-42l21.7-1.2V49.5L363.1,48L363.4,19.6z"/>
                <polygon points="440,19.8 399,12 424.2,120.5  "/>
                <path d="M77.6,49.9L83,64.1c13.5-8.1,21.1,0,21.1,0l-0.1,9.1c-40.2,7.1-30,44.3-30,44.3   c4.1,14.6,17.3,14.1,17.3,14.1h30.1l0.6-67.7C117.3,32.4,77.6,49.9,77.6,49.9z M104,118.6c0,0-14.6,3.5-16.2-10.7   c0,0,0.3-22,16.7-19.6L104,118.6z"/>
            </g>
        </svg>
    </a>

    <div class="header-container header-tools" style="margin-left: 200px;">

        <div id="news">
            <div class="dropdown dropdown-open">
                <p class="ha dropdown-title">Новости<span class="dropdown-content-mode">❯</span></p>
                <div class="dropdown-content">
                    <a href="/news?tag=Updates">Обновления</a>
                    <a href="/news?tag=AboutGame">Об игре</a>
                    <a href="/news?tag=BugsErrors">Баги / Ошибки</a>
                    <a href="/news">Все новости</a>
                </div>
            </div>
        </div>

        <div id="rules">
            <div class="dropdown dropdown-open">
                <p class="ha dropdown-title">Правила<span class="dropdown-content-mode">❯</span></p>
                <div class="dropdown-content">
                    <a href="/privacyPolicy">Политика конфиденциальности</a>
                    <a href="/rules">Условия использования</a>
                </div>
            </div>
        </div>

        <div id="aboutUs">
            <div class="dropdown dropdown-open">
                <p class="ha dropdown-title">О нас<span class="dropdown-content-mode">❯</span></p>
                <div class="dropdown-content">
                    <a href="/aboutUs">О компании</a>
                    <a href="/contacts">Контакты</a>
                    <a href="/reviews">Отзывы</a>
                </div>
            </div>
        </div>

    </div>

    <div class="header-container" style="margin-left: auto;">

        <div id="account">
            <% if (user && user.id) { %>
                <div class="dropdown dropdown-open">
                    <p class="ha dropdown-title"><span class="dropdown-username"></span><span class="dropdown-content-mode">❯</span></p>
                    <div class="dropdown-content">
                        <% if (user.role === 'Admin') {%>
                            <a href="/admin/admin-panel">Админка</a>
                        <% } %>
                        <a onclick="logout();">Выйти</a>
                    </div>
                </div>
            <% } else {%>
                <div class="dropdown">
                    <p onclick="window.location.href = '/auth/login'" class="ha">Войти</p>
                </div>
            <% } %>
        </div>
        <br>
        <div id="settings">
            <div class="dropdown dropdown-open settings-dropdown-title header-settings-icon">
                <p class="ha dropdown-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ellipsis-vertical-icon lucide-ellipsis-vertical"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>
                    <span class="dropdown-content-mode" style="display: none;"></span>
                </p>
                <div class="dropdown-content">
                    <div class="dropdown-content-tools">
                        <p>Язык</p>
                        <ul>
                            <li><a class="setting-on-mode">Русский</a></li>
                            <li><a onclick="changeLocale('en')">English</a></li>
                        </ul>
                    </div>
                    <div class="dropdown-line"></div>
                    <div class="dropdown-content-tools">
                        <p>Тема</p>
                        <ul>
                            <% if (darkTheme === 'on') { %>
                                <li><a class="setting-on-mode">Тёмная</a></li>
                                <li><a onclick="changeTheme('off')">Светлая</a></li>
                            <% } else { %>
                                <li><a onclick="changeTheme('on')">Тёмная</a></li>
                                <li><a class="setting-on-mode">Светлая</a></li>
                            <% } %>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="media-width dropdown-title" style="background: none;" onclick="mediaMenu()">
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-justify-icon lucide-align-justify">
                    <path d="M3 12h18"/><path d="M3 18h18"/><path d="M3 6h18"/>
                </svg>
            </div>
        </div>

    </div>

</header>

<div class="brutalist-card" id="authBorder" hidden>
    <div class="brutalist-card__header">
        <div class="brutalist-card__icon">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
                ></path>
            </svg>
        </div>
        <div class="brutalist-card__alert">Вы не авторизованы!</div>
        <button class="close-btn" id="closeAuthBorder">X</button>
    </div>
    <div class="brutalist-card__message">
        <span>Войдите или создайте аккаунт.</span>
        <br><br>
        <span>
            Регистрируясь или авторизуясь, вы соглашаетесь с нашими
            <a class="termsOfUse" href="/rules" target="_blank">Условиями использования</a>
            и
            <a href="/privacyPolicy" target="_blank" class="privacyPolicy">Политикой конфиденциальности</a>.
        </span>
    </div>
    <div class="brutalist-card__actions">
        <button onclick="window.location.href = '/auth/login'" class="auth-btn">Войти</button>
        <button onclick="window.location.href = '/auth/register'" class="auth-btn">Создать аккаунт</button>
    </div>
</div>

<div class="find-border" id="border" hidden>
    <h4 style="text-align: center">Куда отправимся?</h4>
    <div class="border-data">
        <input type="text" name="text" placeholder="Введите пин-код игры" class="find-input" id="infoInput" autocomplete="off">
        <br><br>
        <button type="submit" id="searchButton" class="find-button">Присоединиться</button>
    </div>
    <button class="close-btn" id="close">X</button>
</div>

<div class="media-body" id="mediaBorder">
    <div class="media-border">

        <div class="media-header">
            <a href="/">Kahoot</a>
            <button id="closeMediaBorder">X</button>
        </div>

        <div class="media-scroller">
            <br/>

            <div class="settings-dropdown-title media-settings-dropdown">
                <div class="dropdown-content-tools">
                    <p>Язык</p>
                    <ul>
                        <li><a class="setting-on-mode">Русский</a></li>
                        <li><a onclick="changeLocale('en')">English</a></li>
                    </ul>
                </div>

                <div class="dropdown-content-tools">
                    <p>Тема</p>
                    <ul>
                        <% if (darkTheme === 'on') { %>
                            <li><a class="setting-on-mode">Тёмная</a></li>
                            <li><a onclick="changeTheme('off')">Светлая</a></li>
                        <% } else { %>
                            <li><a onclick="changeTheme('on')">Тёмная</a></li>
                            <li><a class="setting-on-mode">Светлая</a></li>
                        <% } %>
                    </ul>
                </div>
            </div>

            <br/>
            <div class="media-line"></div>
            <br/>

            <div class="media-tool">
                <p>Новости</p>
                <ul>
                    <li><a href="/news?tag=Updates">Обновления</a></li>
                    <li><a href="/news?tag=AboutGame">Об игре</a></li>
                    <li><a href="/news?tag=BugsErrors">Баги / Ошибки</a></li>
                    <li><a href="/news">Все новости</a></li>
                </ul>
                <div class="media-line"></div>
            </div>

            <div class="media-tool">
                <p>Правила</p>
                <ul>
                    <li><a href="/privacyPolicy">Политика конфиденциальности</a></li>
                    <li><a href="/rules">Условия использования</a></li>
                </ul>
                <div class="media-line"></div>
            </div>

            <div class="media-tool">
                <p>О нас</p>
                <ul>
                    <li><a href="/aboutUs">Компания</a></li>
                    <li><a href="/contacts">Контакты</a></li>
                    <li><a href="/reviews">Отзывы</a></li>
                </ul>
                <div class="media-line"></div>
            </div>

            <% if (user && user.id) { %>

                <div class="media-tool media-b-btn">
                    <p onclick="redirectPage('/create-game')">Создать игру</p>
                    <div class="media-line"></div>
                </div>

                <div class="media-tool media-b-btn">
                    <p onclick="findGame()">Найти игру</p>
                    <div class="media-line"></div>
                </div>

                <div class="media-tool media-b-btn">
                    <p onclick="redirectPage('/my-games')">Мои игры</p>
                    <div class="media-line"></div>
                </div>

                <div class="media-tool media-b-btn">
                    <p onclick="redirectPage('/channels/@me')">Друзья</p>
                    <div class="media-line"></div>
                </div>

                <div class="media-tool media-b-btn">
                    <p onclick="redirectPage('/settings')">Настройки</p>
                    <div class="media-line"></div>
                </div>

                <div class="media-tool media-b-btn">
                    <p onclick="redirectPage('/support')">Поддержка</p>
                </div>
                <br/><br/><br/><br/>

            <% } else { %>

                <div class="media-tool media-b-btn">
                    <p onclick="authMenu()">Начать игру</p>
                    <div class="media-line"></div>
                </div>

                <div class="media-tool media-b-btn">
                    <p onclick="window.location.href = '/support'">Поддержка</p>
                    <div class="media-line"></div>
                </div>

                <br/>

                <div class="media-tool media-b-btn">
                    <p onclick="window.location.href = '/auth/login'">Войти</p>
                </div>

                <br/><br/><br/><br/>

            <% } %>

        </div>

    </div>

</div>

<div class="toast-container" id="toast-container"></div>
<div class="new-barrier" id="barrier" hidden></div>
<%- include('../back.ejs') %>
<script src="/socket.io/socket.io.js"></script>
<script src="/javascripts/header.js"></script>
<script src="/javascripts/locale.js"></script>
<script src="/javascripts/friends.js"></script>
<script src="/javascripts/token.js"></script>
<script src="/javascripts/alert.js"></script>
<script src="/javascripts/warnings.js"></script>
<script src="/javascripts/pageIdentificator.js"></script>
</body>
</html>